<!DOCTYPE html>
<html lang="pl"> 
<head>
    <title>Lista dwukierunkowa - C++</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AlgoZUT 2020/2021">    
    <link rel="shortcut icon" href="resources/cpp.png"> 
    <link id="theme-style" rel="stylesheet" href="resources/theme.css">
</head> 
<script language=JavaScript>
function disableCtrlKeyCombination(e)
{
	var forbiddenKeys = new Array('a', 'c', 'x', 'v', 'u', 'p');
	var key;
	var isCtrl;
	if(window.event)
	{
		key = window.event.keyCode;
		if(window.event.ctrlKey)
			isCtrl = true;
		else
			isCtrl = false;
	}
	else
	{
		key = e.which;
		if(e.ctrlKey)
			isCtrl = true;
		else
			isCtrl = false;
	}
	if(isCtrl)
	{
		for(i=0; i<forbiddenKeys.length; i++)
		{
			if(forbiddenKeys[i].toLowerCase() == String.fromCharCode(key).toLowerCase())
			{
				return false;
			}
		}
	}
	return true;
}
function ieClicked() {
    if (document.all) {
        return false;
    }
}
function firefoxClicked(e) {
    if(document.layers||(document.getElementById&&!document.all)) {
        if (e.which==2||e.which==3) {
            return false;
        }
    }
}
if (document.layers){
    document.captureEvents(Event.MOUSEDOWN);
    document.onmousedown=firefoxClicked;
}else{
    document.onmouseup=firefoxClicked;
    document.oncontextmenu=ieClicked;
}
document.oncontextmenu=new Function("return false")
function disableselect(e){
    return false
}
function reEnable(){
    return true
}
document.onselectstart=new Function ("return false")
if (window.sidebar){
    document.onmousedown=disableselect
    document.onclick=reEnable
}
</script>
<body>
	<footer class="footer text-center py-2 theme-bg-dark"></footer> 
    <header class="header text-center" onmousedown='return false;' onselectstart='return false;'>	    
	    <nav class="navbar navbar-expand-lg navbar-dark" >
			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="code-section pt-3 pt-lg-0">
				    <img class="code-image mb-3 rounded-circle mx-auto" src="resources/cpp.png" alt="image" >			
					<div class="bio mb-0">
					Przykładowy kod w języku C++.
					</div>
				</div>
			</div>
		</nav>
    </header>
    <div class="main-wrapper" onmousedown='return false;' onselectstart='return false;'>
	    <section class="main-code">			
<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
    2
    3
    4
    5
    6
    7
    8
    9
   10
   11
   12
   13
   14
   15
   16
   17
   18
   19
   20
   21
   22
   23
   24
   25
   26
   27
   28
   29
   30
   31
   32
   33
   34
   35
   36
   37
   38
   39
   40
   41
   42
   43
   44
   45
   46
   47
   48
   49
   50
   51
   52
   53
   54
   55
   56
   57
   58
   59
   60
   61
   62
   63
   64
   65
   66
   67
   68
   69
   70
   71
   72
   73
   74
   75
   76
   77
   78
   79
   80
   81
   82
   83
   84
   85
   86
   87
   88
   89
   90
   91
   92
   93
   94
   95
   96
   97
   98
   99
  100
  101
  102
  103
  104
  105
  106
  107
  108
  109
  110
  111
  112
  113
  114
  115
  116
  117
  118
  119
  120
  121
  122
  123
  124
  125
  126
  127
  128
  129
  130
  131
  132
  133
  134
  135
  136
  137
  138
  139
  140
  141
  142
  143
  144
  145
  146
  147
  148
  149
  150
  151
  152
  153
  154
  155
  156
  157
  158
  159
  160
  161
  162
  163
  164
  165
  166
  167
  168
  169
  170
  171
  172
  173
  174
  175
  176
  177
  178
  179
  180
  181
  182
  183</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">#include &quot;stdlib.h&quot;</span>
  <span style="color: #BC7A00">#include &lt;iostream&gt;</span>
  <span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
  
  <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Node</span>
  {
      <span style="color: #B00040">int</span> value;
      Node <span style="color: #666666">*</span>prev;
      Node <span style="color: #666666">*</span>next;
      <span style="color: #008000; font-weight: bold">friend</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">DLinkedList</span>;
  };
  
  
  <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">DLinkedList</span>
  {
      <span style="color: #A0A000">public:</span>
          Node<span style="color: #666666">*</span> root <span style="color: #666666">=</span> nullptr;
          Node<span style="color: #666666">*</span> end <span style="color: #666666">=</span> nullptr;
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">createNode</span>(<span style="color: #B00040">int</span>);
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">getTail</span>();
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">findNode</span>(<span style="color: #B00040">int</span>);
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">removeNode</span>(<span style="color: #B00040">int</span>);
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">deleteNodes</span>();
          Node<span style="color: #666666">*</span> <span style="color: #0000FF">addNode</span>(<span style="color: #B00040">int</span>);
          <span style="color: #B00040">void</span> <span style="color: #0000FF">printNodes</span>();
  };
  
  
  Node<span style="color: #666666">*</span> DLinkedList<span style="color: #666666">::</span>createNode(<span style="color: #B00040">int</span> value)
  {
      Node <span style="color: #666666">*</span>temp;
      temp <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> Node;
  
      temp<span style="color: #666666">-&gt;</span>value <span style="color: #666666">=</span> value;
      temp<span style="color: #666666">-&gt;</span>prev <span style="color: #666666">=</span> nullptr;
      temp<span style="color: #666666">-&gt;</span>next <span style="color: #666666">=</span> nullptr;
      <span style="color: #008000; font-weight: bold">return</span> temp;
  }
  
  
  Node<span style="color: #666666">*</span> DLinkedList<span style="color: #666666">::</span>getTail()
  {
      Node <span style="color: #666666">*</span>temp <span style="color: #666666">=</span> root;
      <span style="color: #408080; font-style: italic">// check is list empty ?</span>
      <span style="color: #008000; font-weight: bold">if</span> (temp <span style="color: #666666">==</span> nullptr)
          <span style="color: #008000; font-weight: bold">return</span> nullptr;
  
      <span style="color: #008000; font-weight: bold">while</span>(temp<span style="color: #666666">-&gt;</span>next <span style="color: #666666">!=</span> nullptr)
          temp <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>next;
      <span style="color: #008000; font-weight: bold">return</span> temp;
  }
  
  
  Node <span style="color: #666666">*</span>DLinkedList<span style="color: #666666">::</span>findNode(<span style="color: #B00040">int</span> value) 
  {
      Node<span style="color: #666666">*</span> temp <span style="color: #666666">=</span> root;
      <span style="color: #008000; font-weight: bold">while</span>(temp <span style="color: #666666">!=</span> nullptr)
      {
          <span style="color: #008000; font-weight: bold">if</span> (temp<span style="color: #666666">-&gt;</span>value <span style="color: #666666">==</span> value)
              <span style="color: #008000; font-weight: bold">return</span> temp;
          temp <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>next;
      }
      <span style="color: #008000; font-weight: bold">return</span> nullptr;
  }
  
  
  Node<span style="color: #666666">*</span> DLinkedList<span style="color: #666666">::</span>removeNode(<span style="color: #B00040">int</span> value) 
  {
      Node <span style="color: #666666">*</span>temp <span style="color: #666666">=</span> findNode(value);
  
      <span style="color: #408080; font-style: italic">// if there is no node with a such value</span>
      <span style="color: #008000; font-weight: bold">if</span> (temp <span style="color: #666666">==</span> nullptr)
      {
          cout<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot;Node with value: &quot;</span><span style="color: #666666">&lt;&lt;</span>value<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot; doesn&#39;t exist!&quot;</span><span style="color: #666666">&lt;&lt;</span>endl;;
          <span style="color: #008000; font-weight: bold">return</span> root;
      }
      <span style="color: #408080; font-style: italic">// if there is only one node in list </span>
      <span style="color: #008000; font-weight: bold">else</span> <span style="color: #008000; font-weight: bold">if</span> (temp <span style="color: #666666">==</span> root <span style="color: #666666">&amp;&amp;</span> temp <span style="color: #666666">==</span> end)
      {
          <span style="color: #008000; font-weight: bold">delete</span> root;
          root <span style="color: #666666">=</span> nullptr;
          end <span style="color: #666666">=</span> nullptr;
          <span style="color: #008000; font-weight: bold">return</span> root;
      }
      <span style="color: #408080; font-style: italic">// if seeked node is root</span>
      <span style="color: #008000; font-weight: bold">else</span> <span style="color: #008000; font-weight: bold">if</span> (temp <span style="color: #666666">==</span> root)
      {
          root <span style="color: #666666">=</span> root<span style="color: #666666">-&gt;</span>next;
          <span style="color: #008000; font-weight: bold">delete</span> root<span style="color: #666666">-&gt;</span>prev;
          root<span style="color: #666666">-&gt;</span>prev <span style="color: #666666">=</span> nullptr;
      }
      <span style="color: #408080; font-style: italic">// if seeked node is end</span>
      <span style="color: #008000; font-weight: bold">else</span> <span style="color: #008000; font-weight: bold">if</span> (temp <span style="color: #666666">==</span> end)
      {
          temp <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>prev;
          <span style="color: #008000; font-weight: bold">delete</span> temp<span style="color: #666666">-&gt;</span>next;
          temp<span style="color: #666666">-&gt;</span>next <span style="color: #666666">=</span> nullptr;
          end <span style="color: #666666">=</span> temp;
      }
      <span style="color: #008000; font-weight: bold">else</span>
      {
          (temp<span style="color: #666666">-&gt;</span>prev)<span style="color: #666666">-&gt;</span>next <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>next;
          (temp<span style="color: #666666">-&gt;</span>next)<span style="color: #666666">-&gt;</span>prev <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>prev;
          <span style="color: #008000; font-weight: bold">delete</span> temp;	
      }
      <span style="color: #008000; font-weight: bold">return</span> root;
  }
  
  
  Node<span style="color: #666666">*</span> DLinkedList<span style="color: #666666">::</span>deleteNodes()
  {
      <span style="color: #408080; font-style: italic">// check is list empty ?</span>
      <span style="color: #008000; font-weight: bold">if</span> (root <span style="color: #666666">==</span> nullptr)
          <span style="color: #008000; font-weight: bold">return</span> root;
      
      <span style="color: #408080; font-style: italic">//delete all elements </span>
      <span style="color: #008000; font-weight: bold">while</span>(root<span style="color: #666666">-&gt;</span>next <span style="color: #666666">!=</span> nullptr)
      {
          root <span style="color: #666666">=</span> root<span style="color: #666666">-&gt;</span>next;
          <span style="color: #008000; font-weight: bold">delete</span> root<span style="color: #666666">-&gt;</span>prev;
      }
      <span style="color: #008000; font-weight: bold">delete</span> root;
      root <span style="color: #666666">=</span> nullptr;
      end <span style="color: #666666">=</span> nullptr;
      <span style="color: #008000; font-weight: bold">return</span> root;
  }
  
  
  Node<span style="color: #666666">*</span> DLinkedList<span style="color: #666666">::</span>addNode(<span style="color: #B00040">int</span> value)
  {
      <span style="color: #408080; font-style: italic">// if list is empty</span>
      <span style="color: #008000; font-weight: bold">if</span>(root <span style="color: #666666">==</span> nullptr)
      {
          root <span style="color: #666666">=</span> createNode(value);
          end <span style="color: #666666">=</span> root;
          <span style="color: #008000; font-weight: bold">return</span> end;
      } 
      end<span style="color: #666666">-&gt;</span>next <span style="color: #666666">=</span> createNode(value);
      (end<span style="color: #666666">-&gt;</span>next)<span style="color: #666666">-&gt;</span>prev <span style="color: #666666">=</span> end;
      end <span style="color: #666666">=</span> end<span style="color: #666666">-&gt;</span>next;
      <span style="color: #008000; font-weight: bold">return</span> end;
  }
  
  
  <span style="color: #B00040">void</span> DLinkedList<span style="color: #666666">::</span>printNodes() 
  {
      <span style="color: #408080; font-style: italic">// if list is empty</span>
      <span style="color: #008000; font-weight: bold">if</span>(root <span style="color: #666666">==</span> nullptr)
          cout<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot;Empty list!&quot;</span>;
  
      Node <span style="color: #666666">*</span>temp <span style="color: #666666">=</span> root;
      <span style="color: #008000; font-weight: bold">while</span>(temp <span style="color: #666666">!=</span> nullptr)
      {
          cout<span style="color: #666666">&lt;&lt;</span>temp<span style="color: #666666">-&gt;</span>value<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot; &quot;</span>;
          temp <span style="color: #666666">=</span> temp<span style="color: #666666">-&gt;</span>next;
      }
      cout<span style="color: #666666">&lt;&lt;</span>endl;
  }
  
  
  <span style="color: #B00040">int</span> main()
  {
      <span style="color: #008000; font-weight: bold">struct</span> DLinkedList list;
  
      list.addNode(<span style="color: #666666">6</span>);
      list.addNode(<span style="color: #666666">16</span>);
      list.addNode(<span style="color: #666666">65</span>);
      list.printNodes();
  
      list.deleteNodes();
      list.printNodes();
  
      list.addNode(<span style="color: #666666">106</span>);
      list.addNode(<span style="color: #666666">1</span>);
      list.addNode(<span style="color: #666666">653</span>);
       list.printNodes();
  
      list.removeNode(<span style="color: #666666">653</span>);
      list.removeNode(<span style="color: #666666">4</span>);
      list.printNodes();
  
      <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
  }
  </pre></td></tr></table></div>
  
	    </section>
    </div>
</body>
</html>